<!DOCTYPE html>
<html>
  <head>
  <title></title>

    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no;" />
	<meta charset="utf-8">

    <!--<script type="text/javascript" src="lib/touch/sencha-touch.js"></script>-->
    <!--<link href="lib/touch/resources/css/sencha-touch.css" rel="stylesheet" type="text/css" />-->

    <script src="http://localhost:8080/target/target-script-min.js#asdf"></script>

    <link rel="stylesheet" type="text/css" href="phonegapsample.css" />

<!-- iPad/iPhone specific css below, add after your main css >
	<link rel="stylesheet" media="only screen and (max-device-width: 1024px)" href="ipad.css" type="text/css" />
	<link rel="stylesheet" media="only screen and (max-device-width: 480px)" href="iphone.css" type="text/css" />
	-->
	<!-- If your application is targeting iOS BEFORE 4.0 you MUST put json2.js from http://www.JSON.org/json2.js into your www directory and include it here -->

	<script type="text/javascript" charset="utf-8" src="phonegap-1.3.0.js"></script>

    <script type="text/javascript" charset="utf-8" src="JREngagePlugin.js"></script>
    <script type="text/javascript" charset="utf-8" src="main.js"></script>


    <script type="text/javascript">
//        var jrEngage;
//        function testPlugin()
//        {
//            //navigator.notification.alert("testPlugin() function");
//
//            jrEngage.print
//            (
//                ["HelloWorld"],
//
//                function(result)
//                {
//                    alert("Success : \r\n"+result);
//                },
//
//                function(error)
//                {
//                    alert("Error : \r\n"+error);
//                }
//            );
//        }
//
//        // If you want to prevent dragging, uncomment this section
//        /*
//        function preventBehavior(e)
//        {
//          e.preventDefault();
//        };
//        document.addEventListener("touchmove", preventBehavior, false);
//        */
//
//        /* If you are supporting your own protocol, the var invokeString will contain any arguments to the app launch.
//        see http://iphonedevelopertips.com/cocoa/launching-your-own-application-via-a-custom-url-scheme.html
//        for more details -jm */
//        /*
//        function handleOpenURL(url)
//        {
//            // TODO: do something with the url passed in.
//        }
//        */
//
//        function onBodyLoad()
//        {
//            document.addEventListener("deviceready", onDeviceReady, false);
//        }
//
//        /* When this function is called, PhoneGap has been initialized and is ready to roll */
//        /* If you are supporting your own protocol, the var invokeString will contain any arguments to the app launch.
//        see http://iphonedevelopertips.com/cocoa/launching-your-own-application-via-a-custom-url-scheme.html
//        for more details -jm */
//        function onDeviceReady()
//        {
//            // do your thing!
//            //navigator.notification.alert("PhoneGap is working");
//
//            jrEngage = window.plugins.jrEngagePlugin;
//
//            jrEngage.initialize(
//                "appcfamhnpkagijaeinl",
//                "http://jrauthenticate.appspot.com/login",
//                null, null);
//        }
//
//        function createTwoCellTableRow(key, value)
//        {
//            var row       = document.createElement("tr");
//
//            var cell1     = document.createElement("td");
//            var cell2     = document.createElement("td");
//
//            var textNode1 = document.createTextNode(key);
//            var textNode2 = document.createTextNode(value);
//
//            cell1.appendChild(textNode1);
//            cell2.appendChild(textNode2);
//
//            row.appendChild(cell1);
//            row.appendChild(cell2);
//
//            return row;
//        }
//
//        function createOneCellTableRow(value)
//        {
//            var row      = document.createElement("tr");
//            var cell     = document.createElement("td");
//            var textNode = document.createTextNode(value);
//
//            cell.appendChild(textNode);
//            row.appendChild(cell);
//
//            return row;
//        }
//
//        function addValueToRowInTable(value, table, baseClassAttr, indentationClassAttr)
//        {
//            var row      = document.createElement("tr");
//            var cell     = document.createElement("td");
//            var textNode = document.createTextNode(value);
//
//            if (baseClassAttr) {
//                row.className += baseClassAttr;
//            }
//
//            if (indentationClassAttr) {
//                cell.className += indentationClassAttr;
//            }
//
//            if (baseClassAttr != "keyRow") {
//                var div = document.createElement("div");
//                div.className += "ellipsize";
//
//                var nobr = document.createElement("nobr");
//
//                nobr.appendChild(textNode);
//                div.appendChild(nobr);
//
//                cell.appendChild(div);
//            }
//            else {
//                cell.appendChild(textNode);
//            }
//
//            row.appendChild(cell);
//            table.appendChild(row);
//        }
//
//        function showAuthenticationDialog()
//        {
//            jrEngage.showAuthentication(
//                function(result)
//                {
////                    alert("Success : \r\n"+result);
//
//                    var jsonBlob = decodeURIComponent(result);
//                    var dict = JSON.parse(jsonBlob);
//
//                    console.log(jsonBlob);
//
//                    addValueToRowInTable(dict.provider, document.getElementById("providerTable"), "singleRow", "levelOne");
//                    addValueToRowInTable(dict.tokenUrl, document.getElementById("tokenUrlTable"), "singleRow", "levelOne");
//
//                    var stat      = dict.stat;
//                    var payload   = dict.payload;
//                    var profile   = dict.auth_info.profile;
//
//                    console.log(profile);
//
//                    var atable = document.getElementById("authResponseTable");
//
//                    for (var key in profile) {
//                        if (profile.hasOwnProperty(key)) {
//                            console.log("key: " + key + "\nvalue: " + profile[key]);
//
//                            addValueToRowInTable(key, atable, "keyRow", "levelOne");
//
//                         /* Yeah, yeah, should be recursive, but for now the auth_info profile
//                            is only ever two levels deep */
//                            if (profile[key] && typeof profile[key] === 'object') {
//                                var subobject = profile[key];
//                                for (var subkey in subobject) {
//                                    if (subobject.hasOwnProperty(subkey)) {
//                                        addValueToRowInTable(subkey, atable, "keyRow", "levelTwo");
//                                        addValueToRowInTable(subobject[subkey], atable, "valueRow", "levelTwo");
//                                    }
//                                }
//                            } else {
//                                addValueToRowInTable(profile[key], atable, "valueRow", "levelOne");
//                            }
//                        }
//                    }
//                },
//
//                function(error)
//                {
////                    alert("Error : \r\n"+error);
//                }
//            );
//        }
    </script>
  </head>
  <body onload="onBodyLoad()">
    <div id="wrapper">
      <div id="main">
        <!--<h1>Hey, it's PhoneGap!</h1>-->

        <img class="logo" src="./janrain_logo@2x.png"/>

        <!--<div class="button"><button onclick="testPlugin()">Test the Plugin</button></div>-->

        <br />

        <div class="button"><button onclick="showAuthenticationDialog()">Sign In</button></div>

        <br />

        <div class="janrainLink"><a href="http://janrain.com">http://janrain.com</a></div>

        <br />

        <table id="providerTable"     class="phonegapTable"><tr><th>Provider</th></tr></table>
        <table id="tokenUrlTable"     class="phonegapTable"><tr><th>Token Url</th></tr></table>
        <table id="authResponseTable" class="phonegapTable"><tr><th>Auth Info</th></tr></table>
        <br/>

        <!--<div id="push"></div>-->
      </div>
    </div>
    <div id="footer">
        <span class="poweredBy">Powered by Janrain</span>
    </div>
  </body>
</html>
